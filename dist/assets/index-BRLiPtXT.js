var Cs=Object.defineProperty;var nn=n=>{throw TypeError(n)};var ks=(n,e,t)=>e in n?Cs(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var g=(n,e,t)=>ks(n,typeof e!="symbol"?e+"":e,t),Dt=(n,e,t)=>e.has(n)||nn("Cannot "+t);var r=(n,e,t)=>(Dt(n,e,"read from private field"),t?t.call(n):e.get(n)),p=(n,e,t)=>e.has(n)?nn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),C=(n,e,t,s)=>(Dt(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),m=(n,e,t)=>(Dt(n,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var At,E,vn,me,sn,Cn,Nt,Wt,Ut,Ft,Ke={},kn=[],xs=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Yt=Array.isArray;function de(n,e){for(var t in e)n[t]=e[t];return n}function xn(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Rs(n,e,t){var s,i,o,c={};for(o in e)o=="key"?s=e[o]:o=="ref"?i=e[o]:c[o]=e[o];if(arguments.length>2&&(c.children=arguments.length>3?At.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)c[o]===void 0&&(c[o]=n.defaultProps[o]);return mt(n,c,s,i,null)}function mt(n,e,t,s,i){var o={type:n,props:e,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++vn,__i:-1,__u:0};return i==null&&E.vnode!=null&&E.vnode(o),o}function at(n){return n.children}function ft(n,e){this.props=n,this.context=e}function je(n,e){if(e==null)return n.__?je(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?je(n):null}function Rn(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Rn(n)}}function rn(n){(!n.__d&&(n.__d=!0)&&me.push(n)&&!vt.__r++||sn!==E.debounceRendering)&&((sn=E.debounceRendering)||Cn)(vt)}function vt(){var n,e,t,s,i,o,c,u;for(me.sort(Nt);n=me.shift();)n.__d&&(e=me.length,s=void 0,o=(i=(t=n).__v).__e,c=[],u=[],t.__P&&((s=de({},i)).__v=i.__v+1,E.vnode&&E.vnode(s),Xt(t.__P,s,i,t.__n,t.__P.namespaceURI,32&i.__u?[o]:null,c,o??je(i),!!(32&i.__u),u),s.__v=i.__v,s.__.__k[s.__i]=s,Sn(c,s,u),s.__e!=o&&Rn(s)),me.length>e&&me.sort(Nt));vt.__r=0}function En(n,e,t,s,i,o,c,u,d,h,w){var a,x,f,A,O,q=s&&s.__k||kn,L=e.length;for(t.__d=d,Es(t,e,q),d=t.__d,a=0;a<L;a++)(f=t.__k[a])!=null&&(x=f.__i===-1?Ke:q[f.__i]||Ke,f.__i=a,Xt(n,f,x,i,o,c,u,d,h,w),A=f.__e,f.ref&&x.ref!=f.ref&&(x.ref&&Jt(x.ref,null,f),w.push(f.ref,f.__c||A,f)),O==null&&A!=null&&(O=A),65536&f.__u||x.__k===f.__k?d=Ln(f,d,n):typeof f.type=="function"&&f.__d!==void 0?d=f.__d:A&&(d=A.nextSibling),f.__d=void 0,f.__u&=-196609);t.__d=d,t.__e=O}function Es(n,e,t){var s,i,o,c,u,d=e.length,h=t.length,w=h,a=0;for(n.__k=[],s=0;s<d;s++)(i=e[s])!=null&&typeof i!="boolean"&&typeof i!="function"?(c=s+a,(i=n.__k[s]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?mt(null,i,null,null,null):Yt(i)?mt(at,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?mt(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=n,i.__b=n.__b+1,o=null,(u=i.__i=Ls(i,t,c,w))!==-1&&(w--,(o=t[u])&&(o.__u|=131072)),o==null||o.__v===null?(u==-1&&a--,typeof i.type!="function"&&(i.__u|=65536)):u!==c&&(u==c-1?a--:u==c+1?a++:(u>c?a--:a++,i.__u|=65536))):i=n.__k[s]=null;if(w)for(s=0;s<h;s++)(o=t[s])!=null&&!(131072&o.__u)&&(o.__e==n.__d&&(n.__d=je(o)),In(o,o))}function Ln(n,e,t){var s,i;if(typeof n.type=="function"){for(s=n.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=n,e=Ln(s[i],e,t));return e}n.__e!=e&&(e&&n.type&&!t.contains(e)&&(e=je(n)),t.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Ls(n,e,t,s){var i=n.key,o=n.type,c=t-1,u=t+1,d=e[t];if(d===null||d&&i==d.key&&o===d.type&&!(131072&d.__u))return t;if(s>(d!=null&&!(131072&d.__u)?1:0))for(;c>=0||u<e.length;){if(c>=0){if((d=e[c])&&!(131072&d.__u)&&i==d.key&&o===d.type)return c;c--}if(u<e.length){if((d=e[u])&&!(131072&d.__u)&&i==d.key&&o===d.type)return u;u++}}return-1}function on(n,e,t){e[0]==="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||xs.test(e)?t:t+"px"}function _t(n,e,t,s,i){var o;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof s=="string"&&(n.style.cssText=s=""),s)for(e in s)t&&e in t||on(n.style,e,"");if(t)for(e in t)s&&t[e]===s[e]||on(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in n||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=t,t?s?t.u=s.u:(t.u=Wt,n.addEventListener(e,o?Ft:Ut,o)):n.removeEventListener(e,o?Ft:Ut,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!=="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function an(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=Wt++;else if(e.t<t.u)return;return t(E.event?E.event(e):e)}}}function Xt(n,e,t,s,i,o,c,u,d,h){var w,a,x,f,A,O,q,L,S,Ee,F,Le,V,ct,he,Be,U=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(d=!!(32&t.__u),o=[u=e.__e=t.__e]),(w=E.__b)&&w(e);e:if(typeof U=="function")try{if(L=e.props,S="prototype"in U&&U.prototype.render,Ee=(w=U.contextType)&&s[w.__c],F=w?Ee?Ee.props.value:w.__:s,t.__c?q=(a=e.__c=t.__c).__=a.__E:(S?e.__c=a=new U(L,F):(e.__c=a=new ft(L,F),a.constructor=U,a.render=Is),Ee&&Ee.sub(a),a.props=L,a.state||(a.state={}),a.context=F,a.__n=s,x=a.__d=!0,a.__h=[],a._sb=[]),S&&a.__s==null&&(a.__s=a.state),S&&U.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=de({},a.__s)),de(a.__s,U.getDerivedStateFromProps(L,a.__s))),f=a.props,A=a.state,a.__v=e,x)S&&U.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),S&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(S&&U.getDerivedStateFromProps==null&&L!==f&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(L,F),!a.__e&&(a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(L,a.__s,F)===!1||e.__v===t.__v)){for(e.__v!==t.__v&&(a.props=L,a.state=a.__s,a.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(Se){Se&&(Se.__=e)}),Le=0;Le<a._sb.length;Le++)a.__h.push(a._sb[Le]);a._sb=[],a.__h.length&&c.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(L,a.__s,F),S&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(f,A,O)})}if(a.context=F,a.props=L,a.__P=n,a.__e=!1,V=E.__r,ct=0,S){for(a.state=a.__s,a.__d=!1,V&&V(e),w=a.render(a.props,a.state,a.context),he=0;he<a._sb.length;he++)a.__h.push(a._sb[he]);a._sb=[]}else do a.__d=!1,V&&V(e),w=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++ct<25);a.state=a.__s,a.getChildContext!=null&&(s=de(de({},s),a.getChildContext())),S&&!x&&a.getSnapshotBeforeUpdate!=null&&(O=a.getSnapshotBeforeUpdate(f,A)),En(n,Yt(Be=w!=null&&w.type===at&&w.key==null?w.props.children:w)?Be:[Be],e,t,s,i,o,c,u,d,h),a.base=e.__e,e.__u&=-161,a.__h.length&&c.push(a),q&&(a.__E=a.__=null)}catch(Se){if(e.__v=null,d||o!=null){for(e.__u|=d?160:128;u&&u.nodeType===8&&u.nextSibling;)u=u.nextSibling;o[o.indexOf(u)]=null,e.__e=u}else e.__e=t.__e,e.__k=t.__k;E.__e(Se,e,t)}else o==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=Ss(t.__e,e,t,s,i,o,c,d,h);(w=E.diffed)&&w(e)}function Sn(n,e,t){e.__d=void 0;for(var s=0;s<t.length;s++)Jt(t[s],t[++s],t[++s]);E.__c&&E.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(o){o.call(i)})}catch(o){E.__e(o,i.__v)}})}function Ss(n,e,t,s,i,o,c,u,d){var h,w,a,x,f,A,O,q=t.props,L=e.props,S=e.type;if(S==="svg"?i="http://www.w3.org/2000/svg":S==="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(h=0;h<o.length;h++)if((f=o[h])&&"setAttribute"in f==!!S&&(S?f.localName===S:f.nodeType===3)){n=f,o[h]=null;break}}if(n==null){if(S===null)return document.createTextNode(L);n=document.createElementNS(i,S,L.is&&L),u&&(E.__m&&E.__m(e,o),u=!1),o=null}if(S===null)q===L||u&&n.data===L||(n.data=L);else{if(o=o&&At.call(n.childNodes),q=t.props||Ke,!u&&o!=null)for(q={},h=0;h<n.attributes.length;h++)q[(f=n.attributes[h]).name]=f.value;for(h in q)if(f=q[h],h!="children"){if(h=="dangerouslySetInnerHTML")a=f;else if(!(h in L)){if(h=="value"&&"defaultValue"in L||h=="checked"&&"defaultChecked"in L)continue;_t(n,h,null,f,i)}}for(h in L)f=L[h],h=="children"?x=f:h=="dangerouslySetInnerHTML"?w=f:h=="value"?A=f:h=="checked"?O=f:u&&typeof f!="function"||q[h]===f||_t(n,h,f,q[h],i);if(w)u||a&&(w.__html===a.__html||w.__html===n.innerHTML)||(n.innerHTML=w.__html),e.__k=[];else if(a&&(n.innerHTML=""),En(n,Yt(x)?x:[x],e,t,s,S==="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,c,o?o[0]:t.__k&&je(t,0),u,d),o!=null)for(h=o.length;h--;)xn(o[h]);u||(h="value",S==="progress"&&A==null?n.removeAttribute("value"):A!==void 0&&(A!==n[h]||S==="progress"&&!A||S==="option"&&A!==q[h])&&_t(n,h,A,q[h],i),h="checked",O!==void 0&&O!==n[h]&&_t(n,h,O,q[h],i))}return n}function Jt(n,e,t){try{if(typeof n=="function"){var s=typeof n.__u=="function";s&&n.__u(),s&&e==null||(n.__u=n(e))}else n.current=e}catch(i){E.__e(i,t)}}function In(n,e,t){var s,i;if(E.unmount&&E.unmount(n),(s=n.ref)&&(s.current&&s.current!==n.__e||Jt(s,null,e)),(s=n.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(o){E.__e(o,e)}s.base=s.__P=null}if(s=n.__k)for(i=0;i<s.length;i++)s[i]&&In(s[i],e,t||typeof n.type!="function");t||xn(n.__e),n.__c=n.__=n.__e=n.__d=void 0}function Is(n,e,t){return this.constructor(n,t)}function As(n,e,t){var s,i,o,c;E.__&&E.__(n,e),i=(s=typeof t=="function")?null:e.__k,o=[],c=[],Xt(e,n=(!s&&t||e).__k=Rs(at,null,[n]),i||Ke,Ke,e.namespaceURI,!s&&t?[t]:i?null:e.firstChild?At.call(e.childNodes):null,o,!s&&t?t:i?i.__e:e.firstChild,s,c),Sn(o,n,c)}At=kn.slice,E={__e:function(n,e,t,s){for(var i,o,c;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(n)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,s||{}),c=i.__d),c)return i.__E=i}catch(u){n=u}throw n}},vn=0,ft.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=de({},this.state),typeof n=="function"&&(n=n(de({},t),this.props)),n&&de(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),rn(this))},ft.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),rn(this))},ft.prototype.render=at,me=[],Cn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Nt=function(n,e){return n.__v.__b-e.__v.__b},vt.__r=0,Wt=0,Ut=an(!1),Ft=an(!0);var qs=0;function l(n,e,t,s,i,o){e||(e={});var c,u,d=e;"ref"in e&&(c=e.ref,delete e.ref);var h={type:n,props:d,key:t,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--qs,__i:-1,__u:0,__source:i,__self:o};if(typeof n=="function"&&(c=n.defaultProps))for(u in c)d[u]===void 0&&(d[u]=c[u]);return E.vnode&&E.vnode(h),h}var Z;class Ms{constructor(e){p(this,Z);C(this,Z,e)}async list(e){return await r(this,Z).sendRequest("analysis/list",e)}async triggerNoise(e){return await r(this,Z).sendRequest("analysis/trigger-noise",e)}async triggerSun(e){return await r(this,Z).sendRequest("analysis/trigger-sun",e)}async getSunAnalysis(e){return await r(this,Z).sendRequest("analysis/get-sun-analysis",e)}async getNoiseAnalysis(e){return await r(this,Z).sendRequest("analysis/get-noise-analysis",e)}async getGroundGrid(e){return await r(this,Z).sendRequest("analysis/get-ground-grid",e)}}Z=new WeakMap;var We;class Ps{constructor(e){p(this,We);C(this,We,e)}async calculate(e){return await r(this,We).sendRequest("area-metrics/get",e)}}We=new WeakMap;function Ts(){const n=document.createElement("template");return n.innerHTML=`
    <style>
      :host {
        position: absolute;
        top: 0;
        left: 0;
        min-width: 100%;
        min-height: 100%;
        display: flex;
        background-color: white;
        z-index: 2;
        --high-extraextralarge-regular: normal 400 normal 24px/30px "Artifakt Element", sans-serif;
        --high-medium-regular: normal 400 normal 12px/16px "Artifakt Element", sans-serif;
        --high-small-regular: normal 400 normal 11px/18px "Artifakt Element", sans-serif;
        --high-small-bold: normal 700 normal 11px/14px "Artifakt Element", sans-serif;
      }
      .login-overlay {
        max-width: 300px;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        margin: auto;
      }
      .header {
        font: var(--high-extraextralarge-regular);
        font-size: 28px;
        line-height: 36px;
        margin: 0 0 40px;
        padding: 0;
      }
      .login-overlay svg {
        margin-bottom: 16px;
      }
      .login-overlay p {
        font: var(--high-medium-regular);
        width: 100%;
        padding: 0;
      }
      .info-text {
        margin: 0 0 24px;
      }
      .login-overlay weave-button {
        width: 164px;
        margin-bottom: 12px;
      }
      .login-overlay-info {
        font: var(--high-small-regular);
        margin: 0;
      }
      #name-placeholder {
        font: var(--high-small-bold);
      }
    </style>
    <div class="login-overlay">
      <h3 class="header">Permissions Required</h3>
      <svg
        width="144"
        height="150"
        viewBox="0 0 144 150"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M69.989 29.9105C69.7832 29.7772 69.5185 29.7765 69.312 29.9088L41.9891 47.4147C41.8097 47.5296 41.7013 47.7279 41.7013 47.941V73.7963L14.8152 91.0223C14.6358 91.1372 14.5273 91.3356 14.5273 91.5486V117.758C14.5273 117.971 14.6358 118.169 14.8151 118.284L42.1381 135.792C42.3446 135.924 42.6093 135.923 42.8151 135.79L69.502 118.501L96.4859 135.792C96.6924 135.924 96.9571 135.923 97.1629 135.79L124.188 118.282C124.366 118.167 124.473 117.97 124.473 117.758V91.5468C124.473 91.3349 124.366 91.1374 124.188 91.0222L97.2991 73.6063V47.9392C97.2991 47.7273 97.1917 47.5298 97.0139 47.4146L69.989 29.9105ZM70.8335 91.6354L96.8315 74.7928L122.682 91.5363L96.8213 107.631L70.8335 91.6354ZM42.3169 74.8864L68.3173 91.5468L42.4735 107.631L16.3275 91.538L42.3169 74.8864ZM96.0491 73.7963V49.0643L70.2742 65.1053V90.3104L96.0491 73.7963ZM69.0242 90.4939V65.1073L42.9513 49.0595V73.6063L69.0242 90.4939ZM69.6474 64.0231L95.5081 47.9286L69.6474 31.1785L43.5014 47.9303L69.6474 64.0231ZM70.1252 117.416V92.6672L96.1981 108.715V134.123L70.1252 117.416ZM43.1003 108.713L68.8752 92.6719V117.418L43.1003 134.116V108.713ZM15.7773 92.6672V117.416L41.8503 134.123V108.715L15.7773 92.6672ZM97.4481 108.713V134.116L123.223 117.418V92.6719L97.4481 108.713Z"
          fill="#808080"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M114.914 5.15586C115.202 4.90317 115.573 4.76515 115.956 4.76811C116.173 4.76978 119.523 4.76978 119.74 4.76811C120.123 4.76515 120.494 4.90317 120.783 5.15586C121.071 5.40854 121.256 5.75828 121.304 6.13863L121.304 6.13997L121.742 9.70996C123.477 10.1245 125.134 10.8137 126.651 11.7514L129.501 9.52748L129.502 9.5267C129.803 9.29294 130.179 9.17696 130.559 9.20059C130.939 9.22422 131.297 9.38583 131.567 9.655C131.722 9.80972 134.105 12.1942 134.26 12.3492C134.529 12.6188 134.69 12.9773 134.714 13.3574C134.737 13.7375 134.621 14.1132 134.388 14.414L134.388 14.4141L132.173 17.266C133.111 18.7835 133.799 20.4416 134.212 22.1769L137.786 22.6233L137.786 22.6233C138.167 22.6709 138.516 22.8566 138.769 23.145C139.021 23.4334 139.159 23.8045 139.156 24.1878C139.155 24.345 139.173 26.2011 139.183 27.2591C139.187 27.6368 139.19 27.9128 139.19 27.9734C139.193 28.3567 139.055 28.7278 138.803 29.0162C138.551 29.304 138.202 29.4895 137.823 29.5376C137.822 29.5377 137.821 29.5378 137.82 29.5379L134.271 30.0093C133.857 31.7461 133.168 33.4055 132.229 34.924L134.422 37.7471L134.422 37.7472C134.655 38.048 134.771 38.4237 134.748 38.8038C134.724 39.1839 134.563 39.5424 134.294 39.812C134.139 39.967 131.756 42.3515 131.601 42.5062C131.331 42.7754 130.973 42.937 130.593 42.9606C130.213 42.9843 129.837 42.8683 129.536 42.6345L129.536 42.6345L126.686 40.4183C125.169 41.3564 123.511 42.0458 121.776 42.4604L121.333 46.0346L121.332 46.0352C121.285 46.4155 121.1 46.7653 120.811 47.018C120.523 47.2706 120.152 47.4087 119.769 47.4057C119.552 47.404 116.194 47.404 115.978 47.4057C115.594 47.4087 115.223 47.2706 114.935 47.018C114.647 46.7653 114.461 46.4155 114.414 46.0352L114.414 46.0351L113.968 42.4605C112.232 42.0459 110.574 41.3564 109.057 40.4181L106.201 42.6345C105.9 42.8683 105.525 42.9843 105.145 42.9606C104.764 42.937 104.406 42.7754 104.136 42.5062C103.982 42.3515 101.598 39.967 101.444 39.812C101.175 39.5424 101.013 39.1839 100.99 38.8038C100.966 38.4237 101.082 38.048 101.316 37.7472L101.318 37.7445L103.533 34.9219C102.595 33.4049 101.908 31.7475 101.495 30.013L97.9209 29.5666L97.9208 29.5666C97.5404 29.5191 97.1907 29.3334 96.9382 29.045C96.6857 28.7565 96.5479 28.3854 96.5508 28.0022C96.5525 27.7856 96.5525 24.4259 96.5508 24.2094C96.5479 23.8261 96.6857 23.455 96.9382 23.1665C97.1907 22.8781 97.5404 22.6924 97.9208 22.6449L97.9209 22.6449L101.495 22.1985C101.908 20.4632 102.596 18.8052 103.534 17.2877L101.31 14.4269L101.31 14.4266C101.077 14.1258 100.961 13.7501 100.984 13.37C101.008 12.9899 101.169 12.6314 101.438 12.3618C101.593 12.2068 103.976 9.82229 104.131 9.66757C104.401 9.3984 104.759 9.23679 105.139 9.21316C105.519 9.18953 105.895 9.30551 106.196 9.53927L106.196 9.53954L109.043 11.7553C110.558 10.818 112.213 10.1288 113.946 9.71364L114.392 6.13866L114.392 6.13863C114.44 5.75828 114.625 5.40854 114.914 5.15586ZM115.946 6.10141C115.89 6.10097 115.835 6.12127 115.792 6.15855C115.75 6.19583 115.722 6.24751 115.715 6.30381C115.715 6.30382 115.715 6.30383 115.715 6.30384L115.211 10.3439C115.176 10.6265 114.965 10.8554 114.686 10.9138C112.791 11.3109 110.988 12.0618 109.372 13.1272C109.133 13.2844 108.821 13.2721 108.595 13.0966L105.377 10.592C105.377 10.5919 105.377 10.5919 105.377 10.5919C105.333 10.5575 105.278 10.5405 105.222 10.5439C105.166 10.5474 105.113 10.5712 105.073 10.6109C104.919 10.7651 102.536 13.1491 102.382 13.3035C102.343 13.3433 102.319 13.3963 102.315 13.4526C102.312 13.5088 102.329 13.5642 102.363 13.6086C102.363 13.6087 102.363 13.6088 102.363 13.6089L104.876 16.8407C105.051 17.0661 105.063 17.3782 104.906 17.6166C103.84 19.2347 103.091 21.0401 102.696 22.9377C102.638 23.2168 102.409 23.428 102.126 23.4634L98.0862 23.9679C98.0862 23.9679 98.0862 23.9679 98.0861 23.9679C98.0302 23.975 97.9787 24.0023 97.9414 24.0448C97.9041 24.0874 97.8837 24.1423 97.8841 24.1991C97.8859 24.4225 97.8858 27.789 97.8841 28.0124C97.8837 28.0692 97.9041 28.1241 97.9414 28.1667C97.9787 28.2093 98.0302 28.2366 98.0862 28.2436L102.126 28.7481C102.409 28.7835 102.638 28.9947 102.696 29.2738C103.091 31.1714 103.84 32.9768 104.906 34.5949C105.064 34.8343 105.051 35.1477 104.874 35.3733L102.369 38.5649C102.369 38.5652 102.368 38.5654 102.368 38.5657C102.334 38.61 102.317 38.6653 102.321 38.7212C102.324 38.7775 102.348 38.8305 102.388 38.8703C102.542 39.0247 104.924 41.4087 105.079 41.5629C105.118 41.6026 105.171 41.6264 105.227 41.6299C105.283 41.6334 105.339 41.6163 105.383 41.5818L105.383 41.5815L108.61 39.0767C108.836 38.9017 109.148 38.8896 109.386 39.0466C111.005 40.1127 112.81 40.8636 114.707 41.2599C114.986 41.3181 115.197 41.5472 115.233 41.8299L115.737 45.87C115.744 45.9263 115.771 45.978 115.814 46.0153C115.856 46.0525 115.911 46.0728 115.968 46.0724C116.191 46.0707 119.555 46.0707 119.779 46.0724C119.835 46.0728 119.89 46.0525 119.932 46.0153C119.975 45.978 120.002 45.9263 120.009 45.87C120.009 45.87 120.009 45.87 120.009 45.87L120.51 41.8304C120.546 41.5475 120.757 41.3182 121.036 41.2599C122.933 40.8636 124.739 40.1127 126.357 39.0466C126.596 38.8895 126.908 38.9017 127.133 39.077L130.355 41.5818C130.355 41.5819 130.355 41.5819 130.355 41.5819C130.399 41.6163 130.454 41.6334 130.51 41.6299C130.566 41.6264 130.619 41.6026 130.659 41.5629C130.813 41.4087 133.196 39.0247 133.35 38.8703C133.389 38.8305 133.413 38.7775 133.417 38.7212C133.42 38.6649 133.403 38.6093 133.369 38.5649L130.888 35.3706C130.713 35.1452 130.7 34.8333 130.857 34.5949C131.924 32.9766 132.674 31.1711 133.069 29.2738C133.127 28.9966 133.353 28.7861 133.634 28.7488L137.65 28.2155L137.655 28.2149C137.711 28.2079 137.762 28.1805 137.8 28.1379C137.837 28.0953 137.857 28.0405 137.857 27.9837C137.856 27.9315 137.854 27.6835 137.851 27.3369C137.84 26.2911 137.821 24.3478 137.823 24.1775C137.823 24.1208 137.803 24.0659 137.766 24.0233C137.728 23.9807 137.677 23.9534 137.621 23.9464L133.581 23.4418C133.298 23.4065 133.069 23.1952 133.011 22.9161C132.616 21.0186 131.867 19.2132 130.801 17.5951C130.644 17.3567 130.656 17.0448 130.831 16.8193L133.335 13.5963C133.335 13.5963 133.335 13.5963 133.335 13.5962C133.369 13.5518 133.386 13.4963 133.383 13.44C133.379 13.3838 133.355 13.3308 133.316 13.291C133.162 13.1365 130.779 10.7525 130.625 10.5983C130.585 10.5586 130.532 10.5348 130.476 10.5314C130.42 10.5279 130.365 10.5448 130.321 10.5791C130.321 10.5792 130.321 10.5793 130.32 10.5794L127.1 13.0925C126.875 13.2684 126.562 13.281 126.323 13.1237C124.705 12.0575 122.899 11.3066 121.002 10.9103C120.722 10.852 120.511 10.6223 120.476 10.339L119.981 6.30384C119.981 6.30363 119.981 6.30342 119.981 6.30321C119.973 6.24715 119.946 6.1957 119.904 6.15855C119.861 6.12127 119.806 6.10097 119.75 6.10141C119.527 6.10313 116.169 6.10313 115.946 6.10141ZM117.87 18.0579C113.435 18.0579 109.841 21.6526 109.841 26.0869C109.841 30.5212 113.435 34.1159 117.87 34.1159C122.304 34.1159 125.899 30.5212 125.899 26.0869C125.899 21.6526 122.304 18.0579 117.87 18.0579ZM108.507 26.0869C108.507 20.9162 112.699 16.7246 117.87 16.7246C123.04 16.7246 127.232 20.9162 127.232 26.0869C127.232 31.2576 123.04 35.4492 117.87 35.4492C112.699 35.4492 108.507 31.2576 108.507 26.0869Z"
          fill="#808080"
        />
      </svg>

      <p class="info-text">
        <span id="name-placeholder">This extension</span> needs permissions to access certain data. You have to
        review and accept permissions before you can use this app.
      </p>
      <weave-button
        variant="solid"
        density="medium"
        id="login-button"
      >
        Review permissions
      </weave-button>
      <p class="login-overlay-info">This will open a separate window.</p>
    </div>
    `,n}async function Ds(n){await new Promise((e,t)=>{if(Array.from(document.querySelectorAll("script")).some(o=>o.src.endsWith(n))){e(void 0);return}const i=document.createElement("script");i.type="module",i.src=n,i.onload=()=>{e(void 0)},i.onerror=o=>{t(o)},document.head.append(i)})}var fe;class $s extends HTMLElement{constructor(){super();p(this,fe);C(this,fe,this.attachShadow({mode:"open"}))}connectedCallback(){customElements.get("weave-button")||Ds("https://app.autodeskforma.com/design-system/v2/weave/components/button/weave-button.js"),r(this,fe).appendChild(Ts().content.cloneNode(!0));const t=r(this,fe).getElementById("name-placeholder"),s=this.getAttribute("extension-name");t&&s&&(t.textContent=this.getAttribute("extension-name"));const i=r(this,fe).getElementById("login-button");i&&i.addEventListener("click",()=>{this.dispatchEvent(new Event("loginclick",{bubbles:!0,composed:!0}))})}}fe=new WeakMap;function Hs(){customElements.get("forma-login-overlay")||customElements.define("forma-login-overlay",$s)}const Os="aps-access-token",Ns=120;function cn(n){const e=n.split(".")[1];if(!e)return;const t=atob(e);return JSON.parse(t)}function Us(n){const e=n.exp,t=Math.floor(Date.now()/1e3);return e<t+Ns}function Fs(n,e){return e.clientId===n.client_id}function js(n,e){if(!n)return!1;const t=new Set(n.scope??[]),s=new Set([...t,...e??[]]);return t.size===s.size}const gt=n=>{let e;return async(...t)=>{if(e!==void 0)return await e;try{return e=n(...t),await e}finally{e=void 0}}};function ln(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}var te,Ye,ye,k,Ze,kt,An,qn,Mn,yt,Pn,jt,Tn,Dn,$n,Hn,On,Nn,xt,Un,Fn;class Bs{constructor(e,t){p(this,k);p(this,te);p(this,Ye);p(this,ye);p(this,kt,gt(async e=>{const s=await(await fetch("https://developer.api.autodesk.com/authentication/v2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",accept:"application/json"},body:new URLSearchParams({client_id:r(this,k,Ze).clientId,grant_type:"refresh_token",refresh_token:e})})).json();return m(this,k,jt).call(this,s),s.access_token}));g(this,"acquireTokenSilent",gt(m(this,k,Dn).bind(this)));p(this,xt,async({code:e,verifier:t})=>{if(!r(this,te))throw new Error("Not configured");const{clientId:s,callbackUrl:i}=r(this,te),o=await fetch("https://developer.api.autodesk.com/authentication/v2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",accept:"application/json"},body:new URLSearchParams({client_id:s,grant_type:"authorization_code",code:e,code_verifier:t,redirect_uri:i})});if(!o.ok){const u=await o.json();throw new Ve("Failed to acquire token from authorization flow",u.error,u.error_description??void 0)}return await o.json()});g(this,"acquireTokenPopup",gt(m(this,k,Un).bind(this)));g(this,"acquireTokenOverlay",gt(m(this,k,Fn).bind(this)));C(this,Ye,e),C(this,ye,t)}configure(e){C(this,te,e)}}te=new WeakMap,Ye=new WeakMap,ye=new WeakMap,k=new WeakSet,Ze=function(){if(!r(this,te))throw new Error("Not configured");return r(this,te)},kt=new WeakMap,An=function(){return crypto.randomUUID()},qn=function(e){const{clientId:t,callbackUrl:s,scopes:i}=r(this,k,Ze),o=m(this,k,An).call(this),c=new URLSearchParams;return c.set("redirect_uri",s),c.set("client_id",t),c.set("response_type","code"),c.set("nonce",o),c.set("code_challenge",e),c.set("code_challenge_method","S256"),i&&i.length>0&&c.set("scope",i.join(" ")),`https://developer.api.autodesk.com/authentication/v2/authorize?${c.toString()}`},Mn=async function(e){const t=cn(e);return t!=null&&t.userid?await r(this,Ye).sendRequest("auth/check-is-logged-in-as",{userId:t.userid}):!1},yt=function(){const t=new URLSearchParams(window.location.search).get("extensionId")??"";return`${Os}-${t}`},Pn=function(){const e=m(this,k,yt).call(this),t=localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch{return}},jt=function(e){const t=m(this,k,yt).call(this);localStorage.setItem(t,JSON.stringify({accessToken:e.access_token,refreshToken:e.refresh_token}))},Tn=function(){localStorage.removeItem(m(this,k,yt).call(this))},Dn=async function(){const e=m(this,k,Pn).call(this);if(!e)return;const t=e.accessToken;if(!t)return;const s=cn(t),i=await m(this,k,Mn).call(this,t);if(!s||!Fs(s,r(this,k,Ze))||!js(s,r(this,k,Ze).scopes)||!i){m(this,k,Tn).call(this);return}const o=e.refreshToken;if(o&&Us(s)){const c=await r(this,kt).call(this,o);if(c)return{accessToken:c}}return{accessToken:t}},$n=async function(e){e=e||43;const t=window.crypto,s=ln(Array.prototype.map.call(t.getRandomValues(new Uint8Array(e)),c=>String.fromCharCode(c)).join("")).substring(0,e),i=new Uint8Array(s.length);for(let c=0;c<s.length;c++)i[c]=s.charCodeAt(c);const o=await t.subtle.digest("SHA-256",i);return{verifier:s,challenge:ln(String.fromCharCode.apply(null,[...new Uint8Array(o)]))}},Hn=function(e){return new Promise((t,s)=>{const i=setInterval(()=>{(!e||e.closed)&&(clearInterval(i),s(new Ve("Popup closed before finishing PKCE flow","popup_closed")));let o="";try{o=e.location.href}catch{return}!o||o==="about:blank"||(clearInterval(i),t(m(this,k,Nn).call(this,e.location)))},100)})},On=function(e,t){const s=window.open(e,t,"width=600,height=600,popup=true");if(!s)throw new Error("Popup blocked");return s},Nn=function(e){const t=new URLSearchParams(e.search),s=t.get("error");if(s)throw new Ve("Failed to acquire code from authorization flow",s,t.get("error_description")??void 0);const i=t.get("code");if(!i)throw new Ve("Failed to acquire code from authorization flow","no_code");return{code:i}},xt=new WeakMap,Un=async function(){const e=await this.acquireTokenSilent();if(e)return e;const{challenge:t,verifier:s}=await m(this,k,$n).call(this,43),i=m(this,k,qn).call(this,t),o=m(this,k,On).call(this,i,"_blank");try{const{code:c}=await m(this,k,Hn).call(this,o),u=await r(this,xt).call(this,{code:c,verifier:s});return m(this,k,jt).call(this,u),{accessToken:u.access_token}}finally{o&&!o.closed&&o.close()}},Fn=async function(){const e=document.body,t=await this.acquireTokenSilent();return t||new Promise((s,i)=>{Hs();const o=document.createElement("forma-login-overlay");r(this,ye).observe(o);const u=new URLSearchParams(window.location.search).get("extensionName");u&&o.setAttribute("extension-name",u),o.addEventListener("loginclick",()=>{this.acquireTokenPopup().then(d=>{r(this,ye).unobserve(o),o.remove(),s(d)}).catch(d=>{d instanceof Ve&&d.errorType==="popup_closed"||(r(this,ye).unobserve(o),o.remove(),i(d))})}),e.appendChild(o)})};class Ve extends Error{constructor(t,s,i){super(t);g(this,"errorType");g(this,"errorDescription");this.name="FormaAuthError",this.errorType=s,this.errorDescription=i}}var ne;class Vs{constructor(e){p(this,ne);C(this,ne,e)}configure(e){r(this,ne).configure(e)}async acquireTokenSilent(){return await r(this,ne).acquireTokenSilent()}async acquireTokenPopup(){return await r(this,ne).acquireTokenPopup()}async acquireTokenOverlay(){return await r(this,ne).acquireTokenOverlay()}}ne=new WeakMap;var we;class zs{constructor(e){p(this,we);g(this,"unsubscribe");C(this,we,e)}async add(e){if(this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0),await r(this,we).sendRequest("colorbar/add",{colors:e.colors,labelPosition:e.labelPosition,labels:e.labels,unit:e.unit,isInteractive:e.onRangeFilterChange!==void 0}),e.onRangeFilterChange){const{unsubscribe:t}=await r(this,we).createSubscription("colorbar/on-range-filter-change",e.onRangeFilterChange);this.unsubscribe=t}}async remove(){await r(this,we).sendRequest("colorbar/remove"),this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}}we=new WeakMap;var se;class Zs{constructor(e){p(this,se);C(this,se,e)}async volumeMesh(e){return await r(this,se).sendRequest("elements/representations/volume-mesh",e)}async footprint(e){return await r(this,se).sendRequest("elements/representations/footprint",e)}async grossFloorAreaPolygons(e){return await r(this,se).sendRequest("elements/representations/gross-floor-area-polygons",e)}async graphBuilding(e){return await r(this,se).sendRequest("elements/representations/graph-building",e)}}se=new WeakMap;var re;class Gs{constructor(e){p(this,re);g(this,"floorStack");g(this,"representations");g(this,"blobs");C(this,re,e),this.floorStack=new Ks(e),this.representations=new Zs(e),this.blobs=new Ws(e)}async get(e){return await r(this,re).sendRequest("elements/get-v2",{rootUrn:e.urn,recursive:e.recursive})}async getByPath(e){return await r(this,re).sendRequest("elements/get-v2",e)}async getWorldTransform(e){return await r(this,re).sendRequest("elements/get-world-transform",e)}async editProperties(e){return await r(this,re).sendRequest("elements/edit-properties",e)}}re=new WeakMap;var Ie;class Ks{constructor(e){p(this,Ie);C(this,Ie,e)}async createFromFloors(e){return await r(this,Ie).sendRequest("elements/floor-stack-v2/create-from-floors",e)}async createFromFloorsBatch(e){return await r(this,Ie).sendRequest("elements/floor-stack-v2/create-from-floors-batch",e)}}Ie=new WeakMap;var Xe;class Ws{constructor(e){p(this,Xe);C(this,Xe,e)}async get(e){return await r(this,Xe).sendRequest("elements/blobs/get",e)}}Xe=new WeakMap;var Je;class Ys{constructor(e){p(this,Je);C(this,Je,e)}async putCatalogItem(e){return await r(this,Je).sendRequest("analysis/put-catalog-item",e)}}Je=new WeakMap;var Ae;class Xs{constructor(e){p(this,Ae);C(this,Ae,e)}async createFromLine(e){return await r(this,Ae).sendRequest("experimental/housing/create-housing-line",e)}async listTemplates(){return await r(this,Ae).sendRequest("experimental/housing/list-templates")}}Ae=new WeakMap;var ie;class Js{constructor(e){p(this,ie);C(this,ie,e)}async add(e){return await r(this,ie).sendRequest("experimental/render/element/add",e)}async update(e){await r(this,ie).sendRequest("experimental/render/element/update",e)}async remove(e){await r(this,ie).sendRequest("experimental/render/element/remove",e)}async cleanup(){await r(this,ie).sendRequest("experimental/render/element/cleanup")}}ie=new WeakMap;class Qs{constructor(e){g(this,"element");this.element=new Js(e)}}class er{constructor(e){g(this,"analysis");g(this,"housing");g(this,"render");this.analysis=new Ys(e),this.housing=new Xs(e),this.render=new Qs(e)}}class jn extends Error{constructor(t,s,i,o){super(t,{cause:o==null?void 0:o.cause});g(this,"type");g(this,"data");this.type=s,this.data=i,this.name="RequestError"}}function tr(n){if(n instanceof Error)return n;if(n!=null&&typeof n=="object"&&"message"in n&&typeof n.message=="string"&&"type"in n&&typeof n.type=="string"&&"data"in n)return new jn(n.message,n.type,n.data);throw console.error("Unknown error",n),new Error("Unknown error occurred. See console")}function nr(n){return n instanceof jn?{message:n.message,type:n.type,data:n.data}:n}const Bn="IFRAME-MESSAGE-REQUEST",Vn="IFRAME-MESSAGE-RESPONSE",zn="IFRAME-MESSAGE-EVENT",$t="_connect",Ht="_disconnect",un="_createSubscription",dn="_removeSubscription",hn="_subscriptionEvent";function sr(n){return typeof n=="object"&&n!=null&&"id"in n&&"action"in n&&"type"in n&&n.type===Bn}function rr(n){return typeof n=="object"&&n!=null&&"id"in n&&"type"in n&&n.type==Vn}function ir(n){return typeof n=="object"&&n!=null&&"action"in n&&"type"in n&&n.type===zn}var P;(function(n){n.INITIALIZED="initialized",n.CONNECTING="connecting",n.ESTABLISHED="established",n.DISCONNECTED="disconnected"})(P||(P={}));var qe;class or{constructor(){p(this,qe,new EventTarget)}subscribe(e,t){const s=i=>{t(i.detail)};return r(this,qe).addEventListener(e,s),()=>{r(this,qe).removeEventListener(e,s)}}publish(e,t){r(this,qe).dispatchEvent(new CustomEvent(e,{detail:t}))}}qe=new WeakMap;var j,be,oe,ve,y,Ge,Rt,Qe,Et,Zn,Gn,Kn,Wn,Yn,Xn,wt,ge,Bt,Vt,Jn,Qn,es,ts,ns;class ar{constructor(e){p(this,y);p(this,j,P.INITIALIZED);p(this,be,new Map);p(this,oe,new Map);g(this,"debug");p(this,ve,new or);g(this,"source");g(this,"sourceOrigin");g(this,"incomingMessageInterceptorResolver");g(this,"outgoingMessageInterceptorResolver");g(this,"requestResolver");g(this,"eventResolver");g(this,"subscribeResolver");p(this,Rt,e=>{var i;const t=(i=this.incomingMessageInterceptorResolver)==null?void 0:i.call(this);if(!t)return e;const s=t(e);return this.debug&&console.log("Resulting data after message interceptor",s),s});p(this,Qe,(e,t,s)=>{var u;const i=(u=this.outgoingMessageInterceptorResolver)==null?void 0:u.call(this);if(!i)return e;const o=structuredClone(e,{transfer:t??[]}),c=i(o,{request:s});return this.debug&&console.log("Resulting data after message interceptor",c),c});p(this,Et,e=>{const t=e.source;if(t==null||t!==this.source||this.sourceOrigin!=null&&e.origin!==this.sourceOrigin)return;this.debug&&console.log(`Message from origin ${e.origin}:`,e.data);const s=r(this,Rt).call(this,e.data);ir(s)&&m(this,y,Kn).call(this,s),sr(s)&&m(this,y,Yn).call(this,s,e,t)});this.source=e.source,this.sourceOrigin=e.sourceOrigin,this.requestResolver=e.requestResolver,this.eventResolver=e.eventResolver,this.subscribeResolver=e.subscribeResolver,this.debug=e.debug??!1,this.incomingMessageInterceptorResolver=e.incomingMessageInterceptorResolver,this.outgoingMessageInterceptorResolver=e.outgoingMessageInterceptorResolver,r(this,ve).subscribe("state",({state:t})=>{t===P.DISCONNECTED&&m(this,y,Qn).call(this)}),window.addEventListener("message",r(this,Et))}connect(){(r(this,j)===P.INITIALIZED||r(this,j)===P.DISCONNECTED)&&(m(this,y,ge).call(this,$t,null,!1).catch(e=>{console.error("Sending connect action failed",e)}),m(this,y,Ge).call(this,P.CONNECTING))}disconnect(){m(this,y,ge).call(this,Ht,null,!1).catch(e=>{console.error("Sending disconnect action failed",e)}),m(this,y,Ge).call(this,P.DISCONNECTED)}onStateChange(e){return r(this,ve).subscribe("state",({state:t,prevState:s})=>{t===P.ESTABLISHED&&s!==P.ESTABLISHED?e("connected"):t!==P.ESTABLISHED&&s===P.ESTABLISHED&&e("disconnected")})}get isConnected(){return r(this,j)===P.ESTABLISHED}connectedPromise(){return this.isConnected?Promise.resolve():(this.debug&&console.log("connectedPromise waiting for connection..."),new Promise((e,t)=>{const s=r(this,ve).subscribe("state",({state:i})=>{switch(i){case P.DISCONNECTED:s(),t(new Error("Disconnected"));break;case P.ESTABLISHED:s(),e();break}})}))}async sendRequest(e,t,s){return m(this,y,wt).call(this,e,t,!0,s)}async sendEvent(e,t,s){await m(this,y,ge).call(this,e,t,!0,s)}async createSubscription(e,t,s){const i=crypto.randomUUID();r(this,be).set(i,t),this.debug&&console.log(`Creating subscription with ID ${i} for ${e}`);try{const o={subscriptionId:i,name:e};s&&(o.options=s),await m(this,y,wt).call(this,un,o,!0)}catch(o){throw new Error("Failed to create subscription",{cause:o})}return{unsubscribe:()=>{this.debug&&console.log(`Unsubscribing from subscription ${i} for ${e}`),r(this,be).delete(i),m(this,y,Jn).call(this,i)}}}}j=new WeakMap,be=new WeakMap,oe=new WeakMap,ve=new WeakMap,y=new WeakSet,Ge=function(e){const t=r(this,j);C(this,j,e),r(this,ve).publish("state",{state:e,prevState:t})},Rt=new WeakMap,Qe=new WeakMap,Et=new WeakMap,Zn=function(e){if(!(r(this,j)!==P.INITIALIZED&&r(this,j)!==P.CONNECTING)){if(!(e!=null&&e.ack)){const t={ack:!0};m(this,y,ge).call(this,$t,t,!1).catch(s=>{console.error("Sending event failed",s)})}m(this,y,Ge).call(this,P.ESTABLISHED)}},Gn=function(e){if(r(this,j)!==P.DISCONNECTED){if(!(e!=null&&e.ack)){const t={ack:!0};m(this,y,ge).call(this,Ht,t,!1).catch(s=>{console.error("Sending event failed",s)})}m(this,y,Ge).call(this,P.DISCONNECTED)}},Kn=function(e){if(e.action===$t){m(this,y,Zn).call(this,e.payload);return}if(e.action===Ht){m(this,y,Gn).call(this,e.payload);return}if(e.action===hn){m(this,y,ns).call(this,e.payload);return}if(this.eventResolver){const t=this.eventResolver(e.action);if(t==null){console.warn("Unknown action for message",e);return}t(e.payload)}},Wn=function(e){var t;switch(e){case un:return m(this,y,es).bind(this);case dn:return m(this,y,ts).bind(this);default:return(t=this.requestResolver)==null?void 0:t.call(this,e)}},Yn=function(e,t,s){const i=(c,u)=>{const d={id:e.id,type:Vn,payload:c,error:u},h=m(this,y,Vt).call(this,t.origin);this.debug&&console.log(`Sending message to ${h}:`,d),s.postMessage(r(this,Qe).call(this,d,void 0,e),h)},o=m(this,y,Wn).call(this,e.action);if(o==null){console.warn("Unknown action for request",e),i(new Error(`Unknown action: ${e.action}`),!0);return}Promise.resolve().then(()=>o(e.payload)).then(c=>{i(c)}).catch(c=>{console.error(`Failed during request action ${e.action}`,c),i(nr(c),!0)})},Xn=function(e){let t;return new Promise((s,i)=>{t=o=>{o.source===this.source&&(this.sourceOrigin==null||o.origin===this.sourceOrigin)&&rr(o.data)&&o.data.id===e&&(o.data.error?i(tr(o.data.payload)):s(o.data.payload))},window.addEventListener("message",t)}).finally(()=>{window.removeEventListener("message",t)})},wt=async function(e,t,s,i){const o=crypto.randomUUID(),c=m(this,y,Xn).call(this,o),u={id:o,type:Bn,action:e,payload:t},[d]=await Promise.all([c,m(this,y,Bt).call(this,u,i,s)]);return d},ge=async function(e,t,s,i){const o={type:zn,action:e,payload:t};await m(this,y,Bt).call(this,o,i,s)},Bt=async function(e,t,s){if(this.source==null)throw new Error("Missing source");const i=m(this,y,Vt).call(this,this.sourceOrigin);this.debug&&console.log(`Sending message to ${i}:`,e),s&&await this.connectedPromise(),this.source.postMessage(r(this,Qe).call(this,e,t),i,t)},Vt=function(e){return e==="null"||e==null?"*":e},Jn=function(e){const t={subscriptionId:e};m(this,y,wt).call(this,dn,t,!0).catch(s=>{console.warn("Failed to remove subscription",s)})},Qn=function(){for(const e of r(this,oe).values())try{e()}catch(t){console.warn("Failed to unsubscribe",t)}r(this,oe).clear(),r(this,be).clear()},es=async function(e){var o;const t=(o=this.subscribeResolver)==null?void 0:o.call(this,e.name);if(!t)throw new Error(`Unknown subscription name: ${e.name}`);const s=c=>{const u={subscriptionId:e.subscriptionId,data:c};m(this,y,ge).call(this,hn,u,!0).catch(d=>{console.error("Sending event failed",d)})},{unsubscribe:i}=await t(s,e.options);return r(this,oe).set(e.subscriptionId,i),{ack:!0}},ts=function(e){const t=r(this,oe).get(e.subscriptionId);return t&&(t(),r(this,oe).delete(e.subscriptionId)),{ack:!0}},ns=function(e){const t=e.subscriptionId,s=r(this,be).get(t);if(s==null){console.debug(`Unknown subscription ID: ${e.subscriptionId}`,e);return}s(e.data)};var et;class cr{constructor(e){p(this,et);g(this,"storage");C(this,et,e),this.storage=new lr(e)}async invokeEndpoint(e){return await r(this,et).sendRequest("extensions/invoke-endpoint",e)}}et=new WeakMap;var W,Lt;class lr{constructor(e){p(this,W);p(this,Lt,new TextDecoder);C(this,W,e)}async setObject(e){const t=await r(this,W).sendRequest("extension-installation-storage/set",{key:e.key,metadata:e.metadata,authcontext:e.authcontext}),s=await fetch(t,{method:"PUT",body:e.data});if(!s.ok)throw new Error(`Failed to put data to S3: ${s.status}: ${s.statusText}`)}async getTextObject(e){const t=await r(this,W).sendRequest("extension-installation-storage/get",e);if(t)return{...t,data:r(this,Lt).decode(t.data)}}async getBinaryObject(e){return await r(this,W).sendRequest("extension-installation-storage/get",e)}async listObjects(e){return await r(this,W).sendRequest("extension-installation-storage/list",e)}async deleteObject(e){await r(this,W).sendRequest("extension-installation-storage/delete",e)}}W=new WeakMap,Lt=new WeakMap;var Me;class ur{constructor(e){p(this,Me);C(this,Me,e)}async put(e){return await r(this,Me).sendRequest("generators/put",e)}async list(e){return await r(this,Me).sendRequest("generators/list",{authcontext:e==null?void 0:e.authcontext})}}Me=new WeakMap;var tt;class dr{constructor(e){p(this,tt);C(this,tt,e)}async upload(e){return await r(this,tt).sendRequest("geodata/upload",e)}}tt=new WeakMap;var Y;class hr{constructor(e){p(this,Y);C(this,Y,e)}async getPathsByCategory(e){return await r(this,Y).sendRequest("geometry/get-paths-by-category",e)}async getPathsForVirtualElements(e){return await r(this,Y).sendRequest("geometry/get-paths-for-virtual-elements",{urn:e==null?void 0:e.urn})}async getFootprint(e){return await r(this,Y).sendRequest("geometry/get-footprint",e)}async getTriangles(e){return await r(this,Y).sendRequest("geometry/get-triangles",{path:e==null?void 0:e.path,urn:e==null?void 0:e.urn,excludedPaths:e==null?void 0:e.excludedPaths})}async getPathsInsidePolygons(e){return await r(this,Y).sendRequest("geometry/get-paths-in-polygons",e)}}Y=new WeakMap;var nt,Pe,st;class pr{constructor(e){p(this,nt);p(this,Pe,new Set);p(this,st,new ResizeObserver(()=>{const e=Math.max(...[...r(this,Pe)].map(t=>t.getBoundingClientRect().height));r(this,nt).call(this,e)}));C(this,nt,e.onHeight),this.observe(document.documentElement)}observe(e){r(this,Pe).add(e),r(this,st).observe(e)}unobserve(e){r(this,Pe).delete(e),r(this,st).unobserve(e)}}nt=new WeakMap,Pe=new WeakMap,st=new WeakMap;var X;class _r{constructor(e){p(this,X);C(this,X,e)}async createElementHierarchy(e){return await r(this,X).sendRequest("integrate/create-element-hierarchy",e)}async createElementV2(e){return await r(this,X).sendRequest("integrate/v2/create-element",{data:e})}async updateElementV2(e){const{urn:t,...s}=e;return await r(this,X).sendRequest("integrate/v2/update-element",{urn:t,data:s})}async batchIngestElementsV2(e){return await r(this,X).sendRequest("integrate/v2/batch-ingest-elements",{data:e})}async uploadFile(e){return await r(this,X).sendRequest("integrate/upload-file",e)}createUrn(e){return`urn:adsk-forma-elements:integrate:${e}:${crypto.randomUUID()}:${Date.now()}`}}X=new WeakMap;var Ce;class gr{constructor(e){p(this,Ce);C(this,Ce,e)}async createItem(e){return await r(this,Ce).sendRequest("library/create-item",e)}async updateItem(e){return await r(this,Ce).sendRequest("library/update-item",e)}async deleteItem(e){await r(this,Ce).sendRequest("library/delete-item",e)}}Ce=new WeakMap;var Te;class mr{constructor(e){p(this,Te);C(this,Te,e)}async getWindParameters(){return await r(this,Te).sendRequest("prediction/get-wind-parameters")}async predictWind(e){return await r(this,Te).sendRequest("prediction/predict-wind",e)}}Te=new WeakMap;var ae;class fr{constructor(e){p(this,ae);C(this,ae,e)}async get(){return await r(this,ae).sendRequest("project/get")}async getCountryCode(){return await r(this,ae).sendRequest("project/get-country-code")}async getGeoLocation(){return await r(this,ae).sendRequest("project/get-geo-location")}async getTimezone(){return await r(this,ae).sendRequest("project/get-timezone")}}ae=new WeakMap;var T;class yr{constructor(e){p(this,T);C(this,T,e)}async getRootUrn(){return await r(this,T).sendRequest("proposal/get-root-urn")}async getId(){return await r(this,T).sendRequest("proposal/get-id")}async addElement(e){return await r(this,T).sendRequest("proposal/add-element",e)}async replaceElement(e){await r(this,T).sendRequest("proposal/replace-element",e)}async removeElement(e){await r(this,T).sendRequest("proposal/remove-element",e)}async replaceTerrain(e){await r(this,T).sendRequest("proposal/terrain/replace",e)}async updateElements(e){return await r(this,T).sendRequest("proposal/update-elements",e)}async subscribe(e,t){return await r(this,T).createSubscription("proposal/on-change",e,t)}async awaitProposalPersisted(){await r(this,T).sendRequest("proposal/await-current-proposal-persisted")}async getAll(){return await r(this,T).sendRequest("proposal/get-all")}async get(e){return await r(this,T).sendRequest("proposal/get-by-id",e)}async create(e){return await r(this,T).sendRequest("proposal/create",e)}async update(e){return await r(this,T).sendRequest("proposal/update",e)}async delete(e){await r(this,T).sendRequest("proposal/delete",e)}async duplicate(e){return await r(this,T).sendRequest("proposal/duplicate",e)}async switch(e){await r(this,T).sendEvent("proposal/switch",e)}}T=new WeakMap;var De,ke,$e,rt,zt;class wr{constructor(){p(this,rt);p(this,De,new EventTarget);p(this,ke,[]);p(this,$e,new Set)}subscribe(e){const t=i=>{e(i.detail)},s=Symbol();if(r(this,$e).add(s),r(this,De).addEventListener("event",t),r(this,ke).length>0){const i=r(this,ke);C(this,ke,[]);for(const o of i)m(this,rt,zt).call(this,o)}return()=>{r(this,$e).delete(s),r(this,De).removeEventListener("event",t)}}publish(e){r(this,$e).size===0?r(this,ke).push(e):m(this,rt,zt).call(this,e)}}De=new WeakMap,ke=new WeakMap,$e=new WeakMap,rt=new WeakSet,zt=function(e){r(this,De).dispatchEvent(new CustomEvent("event",{detail:e}))};function br(n){return new Promise((e,t)=>{const s=new Image;s.onload=()=>{e(s)},s.onerror=()=>{t(new Error("Failed to load image"))},s.src=n})}async function vr(n,e,t){const s=document.createElement("canvas");s.width=e,s.height=t;const i=s.getContext("2d");if(!i)throw new Error("Failed to get 2d context from canvas");const o=await br(n);return i.drawImage(o,0,0),s}var J;class Cr{constructor(e){p(this,J);C(this,J,e)}async move(e){await r(this,J).sendRequest("scene/camera/move",e)}async switchPerspective(){await r(this,J).sendRequest("scene/camera/switch-perspective")}async capture(e){return await vr(await r(this,J).sendRequest("scene/camera/capture",e),e.width,e.height)}async getCurrent(){return await r(this,J).sendRequest("scene/camera/get-current")}async subscribe(e){return await r(this,J).createSubscription("camera/on-change",e)}}J=new WeakMap;var G;class kr{constructor(e){p(this,G);C(this,G,e)}async getPoint(){return await r(this,G).sendRequest("design-tool/get-point")}async getPolygon(){return await r(this,G).sendRequest("design-tool/get-polygon")}async getExtrudedPolygon(){return await r(this,G).sendRequest("design-tool/get-extruded-polygon")}async getLine(){return await r(this,G).sendRequest("design-tool/get-line")}async onEditStart(e){return r(this,G).createSubscription("scene/design-events/on-edit-start",e)}async onEditEnd(e){return r(this,G).createSubscription("scene/design-events/on-edit-end",e)}}G=new WeakMap;var xe;class xr{constructor(e){p(this,xe);C(this,xe,e)}async set(e){return await r(this,xe).sendRequest("scene/elements/color/set",e)}async clear(e){return await r(this,xe).sendRequest("scene/elements/color/clear",e)}async clearAll(){return await r(this,xe).sendRequest("scene/elements/color/clear-all")}}xe=new WeakMap;var ce;class Rr{constructor(e){p(this,ce);C(this,ce,e)}async add(e){return await r(this,ce).sendRequest("scene/render/geojson/add",e)}async update(e){await r(this,ce).sendRequest("scene/render/geojson/update",e)}async remove(e){await r(this,ce).sendRequest("scene/render/geojson/remove",e)}async cleanup(){await r(this,ce).sendRequest("scene/render/geojson/cleanup")}}ce=new WeakMap;var le;class Er{constructor(e){p(this,le);C(this,le,e)}async add(e){return await r(this,le).sendRequest("scene/render/glb/add",e)}async update(e){await r(this,le).sendRequest("scene/render/glb/update",e)}async remove(e){await r(this,le).sendRequest("scene/render/glb/remove",e)}async cleanup(){await r(this,le).sendRequest("scene/render/glb/cleanup")}}le=new WeakMap;var B;class Lr{constructor(e){p(this,B);g(this,"glb");g(this,"geojson");g(this,"elementColors");C(this,B,e),this.glb=new Er(e),this.geojson=new Rr(e),this.elementColors=new xr(e)}async hideElement(e){await r(this,B).sendRequest("scene/hidden-elements/set-visibility",{path:e.path,visible:!1})}async unhideElement(e){await r(this,B).sendRequest("scene/hidden-elements/set-visibility",{path:e.path,visible:!0})}async unhideAllElements(){await r(this,B).sendRequest("scene/hidden-elements/unhide-all")}async addMesh(e){return await r(this,B).sendRequest("scene/render/add-mesh",e)}async updateMesh(e){await r(this,B).sendRequest("scene/render/update-mesh",e)}async remove(e){await r(this,B).sendRequest("scene/render/remove",e)}async cleanup(){await r(this,B).sendRequest("scene/render/cleanup")}}B=new WeakMap;var He;class Sr{constructor(e){p(this,He);C(this,He,e)}async getDate(){return await r(this,He).sendRequest("scene/sun/get-date")}async setDate(e){await r(this,He).sendRequest("scene/sun/set-date",e)}}He=new WeakMap;var Oe;class Ir{constructor(e){p(this,Oe);g(this,"groundTexture");C(this,Oe,e),this.groundTexture=new Ar(e)}async getBbox(){return await r(this,Oe).sendRequest("scene/terrain/bbox/get")}async getElevationAt(e){return await r(this,Oe).sendRequest("scene/terrain/get-elevation-at",e)}}Oe=new WeakMap;var ue;class Ar{constructor(e){p(this,ue);C(this,ue,e)}async add(e){const t=e.canvas.toDataURL();await r(this,ue).sendRequest("scene/terrain/ground-texture/add",{name:e.name,canvasUrl:t,position:e.position,scale:e.scale})}async updateTextureData(e){const t=e.canvas.toDataURL();await r(this,ue).sendRequest("scene/terrain/ground-texture/update-texture-data",{name:e.name,canvasUrl:t})}async updatePosition(e){await r(this,ue).sendRequest("scene/terrain/ground-texture/update-position",e)}async remove(e){await r(this,ue).sendRequest("scene/terrain/ground-texture/remove",e)}}ue=new WeakMap;var Ne;class qr{constructor(e){p(this,Ne);C(this,Ne,e)}async getSelection(){return await r(this,Ne).sendRequest("scene/selection/get")}async subscribe(e){return await r(this,Ne).createSubscription("scene/selection/on-change",e)}}Ne=new WeakMap;const Mr="0.84.0",Pr=["https://app.autodeskforma.com",/^https:\/\/local\.autodeskforma\.com:/,"https://app.autodeskforma.eu",/^https:\/\/local\.autodeskforma\.eu:/,"https://app.spacemakerai.eu",/^https:\/\/local\.spacemakerai\.eu:/];var v,it,Re,Ue,Fe,St,ot,It,ss;const Qt=class Qt{constructor(e){p(this,It);g(this,"config");g(this,"source",window.parent);p(this,v);p(this,it);g(this,"origin");g(this,"experimental");g(this,"analysis");g(this,"extensions");g(this,"elements");g(this,"generators");g(this,"geometry");g(this,"integrateElements");g(this,"library");g(this,"project");g(this,"proposal");g(this,"camera");g(this,"sun");g(this,"terrain");g(this,"render");g(this,"selection");g(this,"areaMetrics");g(this,"predictiveAnalysis");g(this,"designTool");g(this,"auth");g(this,"colorbar");g(this,"geoData");p(this,Re,new Map);p(this,Ue,new Map);p(this,Fe,new Map);p(this,St,new pr({onHeight:e=>{r(this,v).sendRequest("resizeIframeHeight",{height:e}).catch(t=>{console.log("failed to resize iframe",t)})}}));p(this,ot,new wr);if(this.config=e,this.origin=(e==null?void 0:e.origin)??Qt.getHostOrigin(),!((e==null?void 0:e.allowedOrigins)??Pr).some(s=>typeof s=="string"?s===this.origin:s.test(this.origin)))throw new Error(`Unsupported origin: ${this.origin}`);C(this,v,new ar({sourceOrigin:this.origin,source:this.source,requestResolver:s=>r(this,Re).get(s),eventResolver:s=>r(this,Ue).get(s),subscribeResolver:s=>r(this,Fe).get(s),debug:e==null?void 0:e.debug})),r(this,v).connect(),r(this,v).sendEvent("sdk-version",{version:Mr}),window.addEventListener("beforeunload",()=>{r(this,v).disconnect()}),window.addEventListener("focus",()=>{r(this,v).sendEvent("window-focused")}),this.analysis=new Ms(r(this,v)),this.extensions=new cr(r(this,v)),this.elements=new Gs(r(this,v)),this.generators=new ur(r(this,v)),this.geometry=new hr(r(this,v)),this.integrateElements=new _r(r(this,v)),this.library=new gr(r(this,v)),this.project=new fr(r(this,v)),this.proposal=new yr(r(this,v)),this.camera=new Cr(r(this,v)),this.sun=new Sr(r(this,v)),this.terrain=new Ir(r(this,v)),this.render=new Lr(r(this,v)),this.selection=new qr(r(this,v)),this.areaMetrics=new Ps(r(this,v)),this.predictiveAnalysis=new mr(r(this,v)),this.designTool=new kr(r(this,v)),this.colorbar=new zs(r(this,v)),this.geoData=new dr(r(this,v)),this.experimental=new er(r(this,v)),C(this,it,new Bs(r(this,v),r(this,St))),this.auth=new Vs(r(this,it)),r(this,Re).set("receive-message-port",s=>{r(this,ot).publish(s)})}async ping(){return await r(this,v).sendRequest("ping")}getIframeMessenger(){return r(this,v)}getProjectId(){const e=new URLSearchParams(window.location.search).get("projectId");if(!e)throw new Error("Missing query parameter: projectId");return e}getExtensionId(){const e=new URLSearchParams(window.location.search).get("extensionId");if(!e)throw new Error("Missing query parameter: extensionId");return e}getRegion(){const e=new URLSearchParams(window.location.search).get("region");if(!e||!m(this,It,ss).call(this,e))throw new Error("Missing query param or not supported region provided");return e}async getPresentationUnitSystem(){return r(this,v).sendRequest("unit-system/get-presentation-unit-system")}async getCanEdit(){return await r(this,v).sendRequest("access/can-edit")}async getCanViewHub(){return await r(this,v).sendRequest("access/can-view-hub")}async getCanEditHub(){return await r(this,v).sendRequest("access/can-edit-hub")}getEmbeddedViewId(){const e=new URLSearchParams(window.location.search).get("embeddedViewId");if(!e)throw new Error("Missing query parameter: embeddedViewId");return e}static getHostOrigin(){const e=new URLSearchParams(window.location.search).get("origin");if(!e)throw new Error("Missing query parameter: origin");return e}setRequestHandler(e,t){r(this,Re).set(e,t)}deleteRequestHandler(e){return r(this,Re).delete(e)}setEventHandler(e,t){r(this,Ue).set(e,t)}deleteEventHandler(e){return r(this,Ue).delete(e)}setSubscribeHandler(e,t){r(this,Fe).set(e,t)}deleteSubscribeHandler(e){return r(this,Fe).delete(e)}sendRequest(e,t,s){return r(this,v).sendRequest(e,t,s)}sendEvent(e,t,s){return r(this,v).sendEvent(e,t,s)}createSubscription(e,t,s){return r(this,v).createSubscription(e,t,s)}async openFloatingPanel(e){await r(this,v).sendRequest("open-floating-panel",e)}async closeEmbeddedView(e){await r(this,v).sendRequest("close-embedded-view",e)}async onEmbeddedViewStateChange(e){return r(this,v).createSubscription("on-embedded-view-state-change",e)}onEmbeddedViewClosing(e){return this.setRequestHandler("on-embedded-view-closing",async t=>{await e(t)}),{unsubscribe:this.deleteSubscribeHandler.bind(this,"on-embedded-view-closing")}}async createMessagePort(e){const t=new MessageChannel;return await r(this,v).sendRequest("create-message-port",{embeddedViewId:e.embeddedViewId,portName:e.portName,port:t.port2},[t.port2]),t.port1}onMessagePort(e){return r(this,ot).subscribe(e)}};v=new WeakMap,it=new WeakMap,Re=new WeakMap,Ue=new WeakMap,Fe=new WeakMap,St=new WeakMap,ot=new WeakMap,It=new WeakSet,ss=function(e){return!!["EMEA","US"].includes(e)};let Zt=Qt;const _e=new Zt;var Ct,M,Ot,pn,Gt=0,rs=[],D=E,_n=D.__b,gn=D.__r,mn=D.diffed,fn=D.__c,yn=D.unmount,wn=D.__;function is(n,e){D.__h&&D.__h(M,n,Gt||e),Gt=0;var t=M.__H||(M.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function I(n){return Gt=1,Tr(os,n)}function Tr(n,e,t){var s=is(Ct++,2);if(s.t=n,!s.__c&&(s.__=[os(void 0,e),function(u){var d=s.__N?s.__N[0]:s.__[0],h=s.t(d,u);d!==h&&(s.__N=[h,s.__[1]],s.__c.setState({}))}],s.__c=M,!M.u)){var i=function(u,d,h){if(!s.__c.__H)return!0;var w=s.__c.__H.__.filter(function(x){return!!x.__c});if(w.every(function(x){return!x.__N}))return!o||o.call(this,u,d,h);var a=!1;return w.forEach(function(x){if(x.__N){var f=x.__[0];x.__=x.__N,x.__N=void 0,f!==x.__[0]&&(a=!0)}}),!(!a&&s.__c.props===u)&&(!o||o.call(this,u,d,h))};M.u=!0;var o=M.shouldComponentUpdate,c=M.componentWillUpdate;M.componentWillUpdate=function(u,d,h){if(this.__e){var w=o;o=void 0,i(u,d,h),o=w}c&&c.call(this,u,d,h)},M.shouldComponentUpdate=i}return s.__N||s.__}function ze(n,e){var t=is(Ct++,3);!D.__s&&Hr(t.__H,e)&&(t.__=n,t.i=e,M.__H.__h.push(t))}function Dr(){for(var n;n=rs.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(bt),n.__H.__h.forEach(Kt),n.__H.__h=[]}catch(e){n.__H.__h=[],D.__e(e,n.__v)}}D.__b=function(n){M=null,_n&&_n(n)},D.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),wn&&wn(n,e)},D.__r=function(n){gn&&gn(n),Ct=0;var e=(M=n.__c).__H;e&&(Ot===M?(e.__h=[],M.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.i=t.__N=void 0})):(e.__h.forEach(bt),e.__h.forEach(Kt),e.__h=[],Ct=0)),Ot=M},D.diffed=function(n){mn&&mn(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(rs.push(e)!==1&&pn===D.requestAnimationFrame||((pn=D.requestAnimationFrame)||$r)(Dr)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.i=void 0})),Ot=M=null},D.__c=function(n,e){e.some(function(t){try{t.__h.forEach(bt),t.__h=t.__h.filter(function(s){return!s.__||Kt(s)})}catch(s){e.some(function(i){i.__h&&(i.__h=[])}),e=[],D.__e(s,t.__v)}}),fn&&fn(n,e)},D.unmount=function(n){yn&&yn(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(s){try{bt(s)}catch(i){e=i}}),t.__H=void 0,e&&D.__e(e,t.__v))};var bn=typeof requestAnimationFrame=="function";function $r(n){var e,t=function(){clearTimeout(s),bn&&cancelAnimationFrame(e),setTimeout(n)},s=setTimeout(t,100);bn&&(e=requestAnimationFrame(t))}function bt(n){var e=M,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),M=e}function Kt(n){var e=M;n.__c=n.__(),M=e}function Hr(n,e){return!n||n.length!==e.length||e.some(function(t,s){return t!==n[s]})}function os(n,e){return typeof e=="function"?e(n):e}function as(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Or(n,e,t){const s=n.coordinates[0],i=n.coordinates[1],o=as(s,i),c=i.x-s.x,u=i.y-s.y,d=Math.sqrt(c*c+u*u),h={x:c/d,y:u/d},w=[];let a=e-t/2;for(;a+t<o;){const x={x:s.x+h.x*a,y:s.y+h.y*a};w.push(x),a+=e}return w}function Nr(n,e,t){const s=n.coordinates[0],i=n.coordinates[1],o=as(s,i),c=i.x-s.x,u=i.y-s.y,d=Math.sqrt(c*c+u*u),h={x:c/d,y:u/d},w=[];let a=e+t/2;for(;a<o;){const x={x:s.x+h.x*a,y:s.y+h.y*a};w.push(x),a+=e}return w}function Ur(){const[n,e]=I([]),[t,s]=I(null),[i,o]=I(null),[c,u]=I(0),[d,h]=I(.6),[w,a]=I(2.3),[x,f]=I(.9),[A,O]=I(500),[q,L]=I(2),[S,Ee]=I("nvt"),[F,Le]=I(0),[V,ct]=I(null),[he,Be]=I(!1),[U,Se]=I(0),[qt,cs]=I(4.7),[Mt,ls]=I(3.5),[lt,us]=I(4),[Pt,ds]=I(null),[ut,hs]=I(null),[dt,ps]=I(null),[K,_s]=I(null),[ht,gs]=I(null),[pt,ms]=I(null),[fs,ys]=I(null),[en,ws]=I(null),bs=()=>{Be(!he)};return ze(()=>{(async()=>{_e.geometry.getPathsByCategory({category:"building"}).then(e)})()},[]),ze(()=>{const b=document.getElementById("get_kavel_info_btn");return b&&b.addEventListener("click",async()=>{console.log("get_kavel_info_btn clicked");const _=await _e.designTool.getPolygon();if(!_||_.length===0)return;console.log(`polygon: ${_},  ${_[0]}, ${_[0].x}, ${_[1].x}`);const $=_.length;let N=0;for(let R=0;R<$;R++){const pe=(R+1)%$;N+=_[R].x*_[pe].y,N-=_[R].y*_[pe].x}let z=Math.round(Math.abs(N/2));console.log(`kavel_area: ${z}`),s(z);const Q=Math.min(..._.map(R=>R.x));Math.max(..._.map(R=>R.x)),console.log(`Smallest x-coordinate: ${Q}`);const ee=Math.min(..._.map(R=>R.y));Math.max(..._.map(R=>R.y)),console.log(`Smallest y-coordinate: ${ee}`)}),()=>{b&&b.removeEventListener("click",()=>{})}},[]),ze(()=>{const b=document.getElementById("get_bouwvlak_info_btn");return b&&b.addEventListener("click",async()=>{console.log("get_bouwvlak_info_btn clicked");const _=await _e.designTool.getPolygon();if(!_||_.length===0)return;console.log(`polygon: ${_},  ${_[0]}, ${_[0].x}, ${_[1].x}`);const $=_.length;let N=0;for(let R=0;R<$;R++){const pe=(R+1)%$;N+=_[R].x*_[pe].y,N-=_[R].y*_[pe].x}let z=Math.round(Math.abs(N/2));console.log(`kavel_area: ${z}`),o(z);const Q=Math.min(..._.map(R=>R.x));Math.max(..._.map(R=>R.x)),console.log(`Smallest x-coordinate: ${Q}`);const ee=Math.min(..._.map(R=>R.y));Math.max(..._.map(R=>R.y)),console.log(`Smallest y-coordinate: ${ee}`)}),()=>{b&&b.removeEventListener("click",()=>{})}},[]),ze(()=>{let b=0;if(t!==null){let _=A/q,$=w*A/100,N=$*25,z=i-_,Q=(d-_/t)*t,ee=t-_-N+x/100;const R=Math.min(z,Q,ee);console.log(`minValue: ${z}, ${Q}, ${ee}`),ct(R),b=R*x/100+$,Le(b)}},[w,A,S,t,i,d,x,q]),ze(()=>{const b=document.getElementById("get_line_for_docks_btn");return b&&b.addEventListener("click",async()=>{console.log("get_line_for_docks_btn clicked");const _=await _e.designTool.getLine();if(!_)return;console.log(`line: ${_},  ${_.coordinates}, 
						${_.coordinates[0].x}, ${_.coordinates[1].x}, ${_.coordinates[0].y}, ${_.coordinates[1].y}, ${_.coordinates[0].z}, ${_.coordinates[1].z}`);let $=Math.sqrt(Math.pow(_.coordinates[1].x-_.coordinates[0].x,2)+Math.pow(_.coordinates[1].y-_.coordinates[0].y,2));console.log(`line_length: ${$}`),ds($),ws(Math.floor($/qt)),hs(_.coordinates[0].x),ps(_.coordinates[0].y),_s(_.coordinates[0].z),gs(_.coordinates[1].x),ms(_.coordinates[1].y),ys(_.coordinates[1].z)}),()=>{b&&b.removeEventListener("click",()=>{})}},[]),l(at,{children:l("div",{class:"section",style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"0",margin:"0"},children:[l("h2",{style:{marginBottom:"20px",marginTop:"0px"},children:"Tool 1: kavelscan"}),l("button",{id:"get_kavel_info_btn",class:"selecteer_btn",children:l("b",{children:"Selecteer jouw kavel"})}),l("p",{class:"text_showing_info_of_selected",children:["Kavel oppervlak [m2]: ",t!==null?t:" --"]}),l("button",{id:"get_bouwvlak_info_btn",class:"selecteer_btn",children:l("b",{children:"Selecteer jouw bouwvlak"})}),l("p",{class:"text_showing_info_of_selected",children:["Bouwvlak oppervlak [m2]: ",i!==null?i:" --"]}),l("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"0",margin:"0",border:"1px solid",backgroundColor:"rgba(36, 79, 166, 0.1)"},children:[l("p",{style:{backgroundColor:"rgba(16, 59, 126, 0.7)",width:"100%",color:"white",margin:"0px"},children:l("b",{children:"Kavel gegevens"})}),l("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[l("label",{style:{width:"250px",marginRight:"20px"},children:"Min. bebouwingspercentage:"}),l("input",{type:"number",step:"0.01",value:c,onChange:b=>u(parseInt(b.target.value)),style:{width:"100px",textAlign:"right",margin:"10px"}})]}),l("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[l("label",{style:{width:"250px",marginRight:"20px"},children:"Max. bebouwingspercentage:"}),l("input",{type:"number",step:"0.01",value:d,onChange:b=>h(parseInt(b.target.value)),style:{width:"100px",textAlign:"right",margin:"10px"}})]}),l("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[l("label",{style:{width:"250px",marginRight:"20px"},children:"Parkeernorm kantoor (double):"}),l("input",{type:"number",step:"0.01",value:w,onChange:b=>a(parseFloat(b.target.value)),style:{width:"100px",textAlign:"right",margin:"10px"}})]}),l("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[l("label",{style:{width:"250px",marginRight:"20px"},children:"Parkeernorm hal (double):"}),l("input",{type:"number",step:"0.01",value:x,onChange:b=>f(parseFloat(b.target.value)),style:{width:"100px",textAlign:"right",margin:"10px"}})]}),l("p",{style:{backgroundColor:"rgba(16, 59, 126, 0.7)",width:"100%",color:"white",margin:"0px"},children:l("b",{children:"Kantoor gegevens"})}),l("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[l("label",{style:{width:"250px",marginRight:"20px"},children:"Oppervlak kantoor (integer):"}),l("input",{type:"number",value:A,onChange:b=>O(parseInt(b.target.value)),style:{width:"100px",textAlign:"right",margin:"10px"}})]}),l("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[l("label",{style:{width:"250px",marginRight:"20px"},children:"Aantal bouwlagen (integer):"}),l("input",{type:"number",value:q,onChange:b=>O(parseInt(b.target.value)),style:{width:"100px",textAlign:"right",margin:"10px"}})]})]}),l("br",{}),l("h3",{style:{backgroundColor:"rgba(16, 59, 126, 0.9)",width:"100%",color:"white",marginBottom:"0px"},children:["Resultaat: ",l("br",{})," geoptimaliseerd kavelgebruik"]}),l("div",{style:{backgroundColor:"#e0ebf9",width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"10px",margin:"0"},children:[l("p",{children:["Parkeerplaats benodigd: ",F]}),l("p",{children:l("b",{children:["Max. hal oppervlak [m2]: ",V!==null?V:"--"]})})]}),l("br",{}),l("br",{}),l("h2",{style:{marginBottom:"0px"},children:"Tool 2: dock plaatsen"}),l("p",{children:["Teken automatisch rechthoekige docks langs een geselecteerd lijn, ",l("br",{}),"zodat artist impression tools docks kan herkennen."]}),l("br",{}),l("button",{class:"selecteer_orange_btn",id:"get_line_for_docks_btn",children:l("b",{children:"Selecteer een line on which to draw docks"})}),l("p",{class:"text_showing_info_of_selected",children:["Lengte geselecteerd lijn [m]: ",Pt!==null?Pt:" --"]}),l("div",{style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"0",margin:"0",border:"1px solid"},children:[l("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[l("label",{style:{width:"250px",marginRight:"20px"},children:"Afstand tussen docks (center-to-center):"}),l("input",{type:"number",step:"0.1",value:qt,onChange:b=>cs(parseInt(b.target.value)),style:{width:"100px",textAlign:"right",margin:"10px"}})]}),l("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[l("label",{style:{width:"250px",marginRight:"20px"},children:"Dock breedte:"}),l("input",{type:"number",step:"0.1",value:Mt,onChange:b=>ls(parseInt(b.target.value)),style:{width:"100px",textAlign:"right",margin:"10px"}})]}),l("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[l("label",{style:{width:"250px",marginRight:"20px"},children:"Dock hoogte:"}),l("input",{type:"number",step:"0.1",value:lt,onChange:b=>us(parseInt(b.target.value)),style:{width:"100px",textAlign:"right",margin:"10px"}})]})]}),l("p",{class:"text_showing_info_of_selected",children:["Aantal docks that can be placed on the line: ",en!==null?en:" --"]}),l("button",{class:"selecteer_orange_btn",onClick:async()=>{console.log(`dockLineLength: ${Pt}`);const b={coordinates:[{x:ut,y:dt},{x:ht,y:pt}]},_=qt,$=Or(b,_,Mt),N=Nr(b,_,Mt);console.log("Points on line:",$,N),$.map((H,Tt)=>(N[Tt],{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[H.x,H.y,K],[H.x,H.y,K+lt]]}})),$.map((H,Tt)=>{const tn=N[Tt];return{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[H.x,H.y,K+lt],[tn.x,tn.y,K+lt]]}}});const z=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,4,1],Q={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[0,0,0],[10,0,0],[10,22,0],[0,22,0],[0,0,0]]]}}]};_e.render.geojson.add({geojson:Q,transform:z}).then(({id:H})=>{console.log("Generated GeoJSON with ID:",H)}).catch(H=>{console.error("Error rendering geojson:",H)}),console.log(`dockLine_startX: ${ut}, dockLine_startY: ${dt}, dockLine_startZ: ${K}`),console.log(`dockLine_endX: ${ht}, dockLine_endY: ${pt}, dockLine_endZ: ${fs}`);const ee=new Float32Array([ut,dt,K,ut,dt,K+10,ht,pt,K+10,ht,pt,K]),R=[0,1,2,0,2,3],pe=new Uint8Array([255,0,0,255,0,255,0,255,0,0,255,255,255,255,0,255]),vs={position:ee,index:R,color:pe};_e.render.addMesh({geometryData:vs}).then(({id:H})=>{console.log("Generated Mesh with ID:",H)}).catch(H=>{console.error("Error rendering mesh:",H)})},children:"Plaats docks"}),l("br",{}),l("button",{class:"remove_docks_btn",onClick:async()=>{try{await _e.render.cleanup(),console.log("All GeoJSONs have been removed.")}catch(b){console.error("Error removing GeoJSONs:",b)}},children:"Verwijder alle docks"}),l("br",{}),l("br",{}),l("br",{}),l("br",{}),l("h3",{style:{backgroundColor:"rgba(19, 41, 75, 0.8)",width:"100%",color:"white"},children:"4. (optioneel) Genereer gebouw opties"}),l("div",{style:{width:"100%",marginTop:"20px"},children:[l("div",{onClick:bs,style:{cursor:"pointer",backgroundColor:"rgba(19, 41, 75, 0.1)",padding:"4px",borderRadius:"4px",textAlign:"left",width:"100%"},children:"Vul hier meer klantwensen in"}),he&&l("div",{style:{padding:"10px",backgroundColor:"#f9f9f9",marginTop:"10px",borderRadius:"4px"},children:l("label",{children:["Jouw gewenste min. hal opp.:",l("input",{type:"number",value:U,onChange:b=>Se(parseFloat(b.target.value)),style:{width:"100px",marginLeft:"10px"}})]})})]}),l("div",{style:{height:"10px"}}),l("button",{children:l("b",{children:["Show een mogelijke optie in 3d ",l("br",{}),"of ",l("br",{}),"Ververs"]})}),l("br",{}),l("div",{children:[l("p",{children:l("b",{children:"Details van deze optie: "})}),l("p",{children:["Parkeerplaats benodigd: ",F]}),l("p",{children:["Hal oppervlak [m2]: ",V!==null?V:"--"]}),l("p",{children:"Kantoor oppervlak: 10000 m2"}),l("p",{children:"Bebouwingspercentage: 60%"})]}),l("br",{}),l("br",{}),l("br",{}),l("br",{}),l("br",{}),l("p",{children:["Total number of buildings: ",n==null?void 0:n.length]}),l("br",{}),l("br",{})]})})}As(l(Ur,{}),document.getElementById("app"));
